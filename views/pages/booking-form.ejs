<%- include('../partials/head', { title: title }) %>
<%- include('../partials/header') %>

<main class="container">
    <% if (tour) { %>
        <div class="booking-container">
            <div class="booking-header">
                <h1>Book: <%= tour.title %></h1>
                <p>Please fill in your booking details below</p>
            </div>

            <div class="booking-content">
                <div class="tour-summary">
                    <h2>Tour Summary</h2>
                    <div class="summary-card">
                        <h3><%= tour.title %></h3>
                        <p><strong>Price:</strong> R<%= tour.price %> per person</p>
                        <p><strong>Duration:</strong> <%= tour.duration %></p>
                        <p><strong>Category:</strong> <%= tour.category %></p>
                    </div>
                </div>

                <div class="booking-form">
                    <h2>Booking Details</h2>
                    
                    <form action="/bookings/create" method="POST">
                        <input type="hidden" name="tour_id" value="<%= tour.id %>">
                        
                        <div class="form-group">
                            <label for="booking_date">Preferred Date *</label>
                            <input type="date" id="booking_date" name="booking_date" required min="<%= new Date().toISOString().split('T')[0] %>">
                        </div>

                        <div class="form-group">
                            <label for="participants">Number of Participants *</label>
                            <input type="number" id="participants" name="participants" required min="1" max="20" value="1">
                        </div>

                        <div class="form-group">
                            <label for="special_requests">Special Requests or Requirements</label>
                            <textarea id="special_requests" name="special_requests" rows="4" placeholder="Any dietary restrictions, accessibility needs, or special requests..."></textarea>
                        </div>

                        <div class="form-actions">
                            <a href="/tours/<%= tour.id %>" class="btn btn-secondary">Cancel</a>
                            <button type="submit" class="btn btn-primary">Submit Booking Request</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="booking-notice">
                <h3>Important Information</h3>
                <ul>
                    <li>Your booking is not confirmed until you receive a confirmation email from us</li>
                    <li>Payment instructions will be sent after we confirm availability</li>
                    <li>For group bookings larger than 8 people, please contact us directly</li>
                    <li>Cancellations must be made at least 48 hours in advance for a full refund</li>
                </ul>
            </div>
        </div>
    <% } else { %>
        <div class="error-message">
            <h2>Tour Not Available for Booking</h2>
            <p>We couldn't find the tour you're trying to book.</p>
            <a href="/tours" class="btn btn-primary">Browse Available Tours</a>
        </div>
    <% } %>
</main>

<%- include('../partials/footer') %>